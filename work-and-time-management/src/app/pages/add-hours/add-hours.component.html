<div class="heading">
  <div class="heading__back-arrow">
    <app-back-arrow (backPressed)="backArrowPressed()"></app-back-arrow>
  </div>
  <div class="heading__name">
    <p *ngIf="momentDay">{{ momentDay.format('DD.MM.YYYY dddd') }}</p>
  </div>
  <div class="heading__settings-btn">
    <img src="../../assets/svg/SVG/settings-btn.svg" alt="settings btn">
  </div>
</div>

<div class="header">
  <p>Add Hours</p>
</div>

<ng-container *ngIf="(worksite$ | async) as worksite">
  <div class="address">
    <p>{{ worksite.nickname }}</p>
    <p><span>{{ worksite.streetAddress }}, </span> <span>{{ worksite.postalCode }}
      </span><span>{{ worksite.city }}</span></p>
  </div>
</ng-container>

<div class="marked-hours">
  <h4>Total marked hours for the day: </h4>
  <span class="marked-hours__hours">6h 45m</span>
</div>

<div class="date-picker">

  <form [formGroup]="dataForm" style="margin-top: -40px;">

    <mat-form-field style="visibility: hidden; height: 1px;">
      <mat-label style="visibility: hidden;">Choose a date</mat-label>
      <input matInput [matDatepicker]="picker" style="visibility: hidden;" formControlName="date" [max]="maxDate">
      <mat-datepicker #picker color="primary" style="visibility: hidden;"></mat-datepicker>
    </mat-form-field>
    <button type="button" class="date-picker__button" (click)="toggleDatePicker(picker)">
      <span class="date-picker__button--text">Date</span>
      <span class="date-picker__button--arrow"></span>
    </button>

    <mat-form-field appearance="fill" style="margin-top: 13px; display: block;">
      <mat-label>Worksite selection</mat-label>
      <mat-select [(ngModel)]="selectedWorksiteValue" name="worksite" formControlName="worksite">
        <ng-container *ngIf="worksites$ | async as worksites">
          <mat-option *ngFor="let worksite of worksites" [value]="worksite.nickname">
            {{ worksite.nickname }}
          </mat-option>
        </ng-container>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill" style="margin-top: -6px; display: block;">
      <mat-label>Worktype selection</mat-label>
      <mat-select [(ngModel)]="selectedWorktypeValue" name="worktype" formControlName="worktype">
        <ng-container *ngIf="worktypes$ | async as worktypes">
          <mat-option *ngFor="let worktype of worktypes" [value]="worktype.workType">
            {{ worktype.viewName }}
          </mat-option>
        </ng-container>
      </mat-select>
    </mat-form-field>

    <ng-container *ngIf="sliderValue$ | async as value; else noValue">
      <ng-container *ngIf="value">
        <label for="slider" style="font-size: 14px;">Time added: {{ value }}h</label>
      </ng-container>
    </ng-container>
    <ng-template #noValue>0h</ng-template>
    
    <mat-slider
      thumbLabel
      [displayWith]="formatLabel"
      tickInterval="1"
      [min]="sliderMin"
      [max]="sliderMax"
      [step]="step"
      formControlName="slider"
      (change)="updateSlider($event)"></mat-slider>

      <button class="submit" type="submit" (click)="onSubmit()">Add</button>
  </form>
</div>

<div class="footer"></div>